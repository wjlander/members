[
  {
    "id": "member_associations",
    "name": "member_associations",
    "type": "base",
    "system": false,
    "schema": [
      {
        "id": "assoc_name",
        "name": "name",
        "type": "text",
        "system": false,
        "required": true,
        "presentable": false,
        "unique": false,
        "options": {
          "min": 1,
          "max": 255,
          "pattern": ""
        }
      },
      {
        "id": "assoc_code",
        "name": "code",
        "type": "text",
        "system": false,
        "required": true,
        "presentable": false,
        "unique": true,
        "options": {
          "min": 2,
          "max": 10,
          "pattern": "^[A-Z0-9]+$"
        }
      },
      {
        "id": "assoc_description",
        "name": "description",
        "type": "text",
        "system": false,
        "required": false,
        "presentable": false,
        "unique": false,
        "options": {
          "min": null,
          "max": 1000,
          "pattern": ""
        }
      },
      {
        "id": "assoc_settings",
        "name": "settings",
        "type": "json",
        "system": false,
        "required": false,
        "presentable": false,
        "unique": false,
        "options": {
          "maxSize": 2000000
        }
      },
      {
        "id": "assoc_status",
        "name": "status",
        "type": "select",
        "system": false,
        "required": true,
        "presentable": false,
        "unique": false,
        "options": {
          "maxSelect": 1,
          "values": ["active", "inactive"]
        }
      }
    ],
    "indexes": [
      "CREATE UNIQUE INDEX `idx_associations_code` ON `associations` (`code`)",
      "CREATE INDEX `idx_associations_status` ON `associations` (`status`)"
    ],
    "listRule": "@request.auth.id != \"\"",
    "viewRule": "@request.auth.id != \"\"",
    "createRule": "@request.auth.role = \"super_admin\"",
    "updateRule": "@request.auth.role = \"super_admin\" || (@request.auth.role = \"admin\" && @request.auth.association = id)",
    "deleteRule": "@request.auth.role = \"super_admin\"",
    "options": {}
  },
  {
    "id": "system_users",
    "name": "system_users",
    "type": "auth",
    "system": false,
    "schema": [
      {
        "id": "user_name_field",
        "name": "name",
        "type": "text",
        "system": false,
        "required": true,
        "presentable": false,
        "unique": false,
        "options": {
          "min": 1,
          "max": 255,
          "pattern": ""
        }
      },
      {
        "id": "user_avatar_field",
        "name": "avatar",
        "type": "file",
        "system": false,
        "required": false,
        "presentable": false,
        "unique": false,
        "options": {
          "mimeTypes": ["image/jpeg", "image/png", "image/svg+xml", "image/gif", "image/webp"],
          "thumbs": ["100x100"],
          "maxSelect": 1,
          "maxSize": 5242880,
          "protected": false
        }
      },
      {
        "id": "user_role_field",
        "name": "role",
        "type": "select",
        "system": false,
        "required": true,
        "presentable": false,
        "unique": false,
        "options": {
          "maxSelect": 1,
          "values": ["super_admin", "admin", "member"]
        }
      },
      {
        "id": "user_association_field",
        "name": "association",
        "type": "relation",
        "system": false,
        "required": false,
        "presentable": false,
        "unique": false,
        "options": {
          "collectionId": "member_associations",
          "cascadeDelete": false,
          "minSelect": null,
          "maxSelect": 1,
          "displayFields": ["name"]
        }
      }
    ],
    "indexes": [
      "CREATE INDEX `idx_users_association` ON `users` (`association`)",
      "CREATE INDEX `idx_users_role` ON `users` (`role`)"
    ],
    "listRule": "@request.auth.id != \"\" && (@request.auth.role = \"super_admin\" || @request.auth.association = association)",
    "viewRule": "@request.auth.id != \"\" && (@request.auth.id = id || @request.auth.role = \"super_admin\" || (@request.auth.role = \"admin\" && @request.auth.association = association))",
    "createRule": "",
    "updateRule": "@request.auth.id = id || @request.auth.role = \"super_admin\" || (@request.auth.role = \"admin\" && @request.auth.association = association)",
    "deleteRule": "@request.auth.id = id || @request.auth.role = \"super_admin\"",
    "options": {
      "allowEmailAuth": true,
      "allowOAuth2Auth": false,
      "allowUsernameAuth": false,
      "exceptEmailDomains": null,
      "manageRule": "@request.auth.role = \"super_admin\" || (@request.auth.role = \"admin\" && @request.auth.association = association)",
      "minPasswordLength": 8,
      "onlyEmailDomains": null,
      "onlyVerified": false,
      "requireEmail": true
    }
  },
  {
    "id": "association_members",
    "name": "association_members",
    "type": "base",
    "system": false,
    "schema": [
      {
        "id": "member_user_field",
        "name": "user",
        "type": "relation",
        "system": false,
        "required": true,
        "presentable": false,
        "unique": true,
        "options": {
          "collectionId": "system_users",
          "cascadeDelete": true,
          "minSelect": null,
          "maxSelect": 1,
          "displayFields": ["name", "email"]
        }
      },
      {
        "id": "member_association_field",
        "name": "association",
        "type": "relation",
        "system": false,
        "required": true,
        "presentable": false,
        "unique": false,
        "options": {
          "collectionId": "member_associations",
          "cascadeDelete": false,
          "minSelect": null,
          "maxSelect": 1,
          "displayFields": ["name"]
        }
      },
      {
        "id": "member_id_field",
        "name": "member_id",
        "type": "text",
        "system": false,
        "required": true,
        "presentable": false,
        "unique": true,
        "options": {
          "min": 3,
          "max": 50,
          "pattern": ""
        }
      },
      {
        "id": "member_name_field",
        "name": "name",
        "type": "text",
        "system": false,
        "required": true,
        "presentable": false,
        "unique": false,
        "options": {
          "min": 1,
          "max": 255,
          "pattern": ""
        }
      },
      {
        "id": "member_email_field",
        "name": "email",
        "type": "email",
        "system": false,
        "required": true,
        "presentable": false,
        "unique": false,
        "options": {
          "exceptDomains": null,
          "onlyDomains": null
        }
      },
      {
        "id": "member_phone_field",
        "name": "phone",
        "type": "text",
        "system": false,
        "required": false,
        "presentable": false,
        "unique": false,
        "options": {
          "min": null,
          "max": 20,
          "pattern": ""
        }
      },
      {
        "id": "member_address_field",
        "name": "address",
        "type": "text",
        "system": false,
        "required": false,
        "presentable": false,
        "unique": false,
        "options": {
          "min": null,
          "max": 500,
          "pattern": ""
        }
      },
      {
        "id": "member_date_of_birth_field",
        "name": "date_of_birth",
        "type": "date",
        "system": false,
        "required": false,
        "presentable": false,
        "unique": false,
        "options": {
          "min": "",
          "max": ""
        }
      },
      {
        "id": "member_status_field",
        "name": "status",
        "type": "select",
        "system": false,
        "required": true,
        "presentable": false,
        "unique": false,
        "options": {
          "maxSelect": 1,
          "values": ["pending", "active", "inactive", "suspended"]
        }
      },
      {
        "id": "member_membership_type_field",
        "name": "membership_type",
        "type": "select",
        "system": false,
        "required": false,
        "presentable": false,
        "unique": false,
        "options": {
          "maxSelect": 1,
          "values": ["regular", "premium", "student", "senior", "honorary"]
        }
      },
      {
        "id": "member_join_date_field",
        "name": "join_date",
        "type": "date",
        "system": false,
        "required": false,
        "presentable": false,
        "unique": false,
        "options": {
          "min": "",
          "max": ""
        }
      },
      {
        "id": "member_notes_field",
        "name": "notes",
        "type": "text",
        "system": false,
        "required": false,
        "presentable": false,
        "unique": false,
        "options": {
          "min": null,
          "max": 2000,
          "pattern": ""
        }
      },
      {
        "id": "member_documents_field",
        "name": "documents",
        "type": "file",
        "system": false,
        "required": false,
        "presentable": false,
        "unique": false,
        "options": {
          "mimeTypes": ["application/pdf", "image/jpeg", "image/png", "application/msword", "application/vnd.openxmlformats-officedocument.wordprocessingml.document"],
          "thumbs": null,
          "maxSelect": 10,
          "maxSize": 10485760,
          "protected": false
        }
      }
    ],
    "indexes": [
      "CREATE UNIQUE INDEX `idx_members_member_id` ON `members` (`member_id`)",
      "CREATE UNIQUE INDEX `idx_members_user` ON `members` (`user`)",
      "CREATE INDEX `idx_members_association` ON `members` (`association`)",
      "CREATE INDEX `idx_members_status` ON `members` (`status`)",
      "CREATE INDEX `idx_members_email` ON `members` (`email`)"
    ],
    "listRule": "@request.auth.id != \"\" && (@request.auth.role = \"super_admin\" || (@request.auth.association = association && @request.auth.role = \"admin\") || @request.auth.id = user)",
    "viewRule": "@request.auth.id != \"\" && (@request.auth.role = \"super_admin\" || (@request.auth.association = association && @request.auth.role = \"admin\") || @request.auth.id = user)",
    "createRule": "@request.auth.id != \"\"",
    "updateRule": "@request.auth.id != \"\" && (@request.auth.role = \"super_admin\" || (@request.auth.association = association && @request.auth.role = \"admin\") || (@request.auth.id = user && status = \"pending\"))",
    "deleteRule": "@request.auth.role = \"super_admin\" || (@request.auth.association = association && @request.auth.role = \"admin\")",
    "options": {}
  },
  {
    "id": "member_dues",
    "name": "member_dues",
    "type": "base",
    "system": false,
    "schema": [
      {
        "id": "dues_member_field",
        "name": "member",
        "type": "relation",
        "system": false,
        "required": true,
        "presentable": false,
        "unique": false,
        "options": {
          "collectionId": "association_members",
          "cascadeDelete": true,
          "minSelect": null,
          "maxSelect": 1,
          "displayFields": ["name", "member_id"]
        }
      },
      {
        "id": "dues_association_field",
        "name": "association",
        "type": "relation",
        "system": false,
        "required": true,
        "presentable": false,
        "unique": false,
        "options": {
          "collectionId": "member_associations",
          "cascadeDelete": false,
          "minSelect": null,
          "maxSelect": 1,
          "displayFields": ["name"]
        }
      },
      {
        "id": "dues_type_field",
        "name": "type",
        "type": "select",
        "system": false,
        "required": true,
        "presentable": false,
        "unique": false,
        "options": {
          "maxSelect": 1,
          "values": ["monthly", "quarterly", "annual", "registration", "special"]
        }
      },
      {
        "id": "dues_amount_field",
        "name": "amount",
        "type": "number",
        "system": false,
        "required": true,
        "presentable": false,
        "unique": false,
        "options": {
          "min": 0,
          "max": null,
          "noDecimal": false
        }
      },
      {
        "id": "dues_due_date_field",
        "name": "due_date",
        "type": "date",
        "system": false,
        "required": true,
        "presentable": false,
        "unique": false,
        "options": {
          "min": "",
          "max": ""
        }
      },
      {
        "id": "dues_paid_date_field",
        "name": "paid_date",
        "type": "date",
        "system": false,
        "required": false,
        "presentable": false,
        "unique": false,
        "options": {
          "min": "",
          "max": ""
        }
      },
      {
        "id": "dues_status_field",
        "name": "status",
        "type": "select",
        "system": false,
        "required": true,
        "presentable": false,
        "unique": false,
        "options": {
          "maxSelect": 1,
          "values": ["pending", "paid", "overdue", "waived"]
        }
      },
      {
        "id": "dues_payment_method_field",
        "name": "payment_method",
        "type": "select",
        "system": false,
        "required": false,
        "presentable": false,
        "unique": false,
        "options": {
          "maxSelect": 1,
          "values": ["cash", "check", "card", "bank_transfer", "paypal", "other"]
        }
      },
      {
        "id": "dues_reference_number_field",
        "name": "reference_number",
        "type": "text",
        "system": false,
        "required": false,
        "presentable": false,
        "unique": false,
        "options": {
          "min": null,
          "max": 100,
          "pattern": ""
        }
      },
      {
        "id": "dues_notes_field",
        "name": "notes",
        "type": "text",
        "system": false,
        "required": false,
        "presentable": false,
        "unique": false,
        "options": {
          "min": null,
          "max": 1000,
          "pattern": ""
        }
      }
    ],
    "indexes": [
      "CREATE INDEX `idx_dues_member` ON `dues` (`member`)",
      "CREATE INDEX `idx_dues_association` ON `dues` (`association`)",
      "CREATE INDEX `idx_dues_status` ON `dues` (`status`)",
      "CREATE INDEX `idx_dues_due_date` ON `dues` (`due_date`)"
    ],
    "listRule": "@request.auth.id != \"\" && (@request.auth.role = \"super_admin\" || (@request.auth.association = association && @request.auth.role = \"admin\") || member.user = @request.auth.id)",
    "viewRule": "@request.auth.id != \"\" && (@request.auth.role = \"super_admin\" || (@request.auth.association = association && @request.auth.role = \"admin\") || member.user = @request.auth.id)",
    "createRule": "@request.auth.id != \"\" && (@request.auth.role = \"super_admin\" || (@request.auth.association = association && @request.auth.role = \"admin\"))",
    "updateRule": "@request.auth.id != \"\" && (@request.auth.role = \"super_admin\" || (@request.auth.association = association && @request.auth.role = \"admin\"))",
    "deleteRule": "@request.auth.role = \"super_admin\" || (@request.auth.association = association && @request.auth.role = \"admin\")",
    "options": {}
  },
  {
    "id": "member_announcements",
    "name": "member_announcements",
    "type": "base",
    "system": false,
    "schema": [
      {
        "id": "announce_association_field",
        "name": "association",
        "type": "relation",
        "system": false,
        "required": true,
        "presentable": false,
        "unique": false,
        "options": {
          "collectionId": "member_associations",
          "cascadeDelete": false,
          "minSelect": null,
          "maxSelect": 1,
          "displayFields": ["name"]
        }
      },
      {
        "id": "announce_title_field",
        "name": "title",
        "type": "text",
        "system": false,
        "required": true,
        "presentable": false,
        "unique": false,
        "options": {
          "min": 1,
          "max": 255,
          "pattern": ""
        }
      },
      {
        "id": "announce_content_field",
        "name": "content",
        "type": "text",
        "system": false,
        "required": true,
        "presentable": false,
        "unique": false,
        "options": {
          "min": 1,
          "max": 5000,
          "pattern": ""
        }
      },
      {
        "id": "announce_type_field",
        "name": "type",
        "type": "select",
        "system": false,
        "required": true,
        "presentable": false,
        "unique": false,
        "options": {
          "maxSelect": 1,
          "values": ["general", "urgent", "event", "reminder"]
        }
      },
      {
        "id": "announce_target_audience_field",
        "name": "target_audience",
        "type": "select",
        "system": false,
        "required": true,
        "presentable": false,
        "unique": false,
        "options": {
          "maxSelect": 1,
          "values": ["all", "active_members", "pending_members", "admins"]
        }
      },
      {
        "id": "announce_publish_date_field",
        "name": "publish_date",
        "type": "date",
        "system": false,
        "required": false,
        "presentable": false,
        "unique": false,
        "options": {
          "min": "",
          "max": ""
        }
      },
      {
        "id": "announce_expiry_date_field",
        "name": "expiry_date",
        "type": "date",
        "system": false,
        "required": false,
        "presentable": false,
        "unique": false,
        "options": {
          "min": "",
          "max": ""
        }
      },
      {
        "id": "announce_status_field",
        "name": "status",
        "type": "select",
        "system": false,
        "required": true,
        "presentable": false,
        "unique": false,
        "options": {
          "maxSelect": 1,
          "values": ["draft", "published", "archived"]
        }
      }
    ],
    "indexes": [
      "CREATE INDEX `idx_announcements_association` ON `announcements` (`association`)",
      "CREATE INDEX `idx_announcements_status` ON `announcements` (`status`)",
      "CREATE INDEX `idx_announcements_publish_date` ON `announcements` (`publish_date`)"
    ],
    "listRule": "@request.auth.id != \"\" && (@request.auth.role = \"super_admin\" || @request.auth.association = association)",
    "viewRule": "@request.auth.id != \"\" && (@request.auth.role = \"super_admin\" || @request.auth.association = association)",
    "createRule": "@request.auth.id != \"\" && (@request.auth.role = \"super_admin\" || (@request.auth.association = association && @request.auth.role = \"admin\"))",
    "updateRule": "@request.auth.id != \"\" && (@request.auth.role = \"super_admin\" || (@request.auth.association = association && @request.auth.role = \"admin\"))",
    "deleteRule": "@request.auth.role = \"super_admin\" || (@request.auth.association = association && @request.auth.role = \"admin\")",
    "options": {}
  },
  {
    "id": "member_mailing_lists",
    "name": "member_mailing_lists",
    "type": "base",
    "system": false,
    "schema": [
      {
        "id": "mlist_association_field",
        "name": "association",
        "type": "relation",
        "system": false,
        "required": true,
        "presentable": false,
        "unique": false,
        "options": {
          "collectionId": "member_associations",
          "cascadeDelete": false,
          "minSelect": null,
          "maxSelect": 1,
          "displayFields": ["name"]
        }
      },
      {
        "id": "mlist_name_field",
        "name": "name",
        "type": "text",
        "system": false,
        "required": true,
        "presentable": false,
        "unique": false,
        "options": {
          "min": 1,
          "max": 255,
          "pattern": ""
        }
      },
      {
        "id": "mlist_description_field",
        "name": "description",
        "type": "text",
        "system": false,
        "required": false,
        "presentable": false,
        "unique": false,
        "options": {
          "min": null,
          "max": 1000,
          "pattern": ""
        }
      },
      {
        "id": "mlist_type_field",
        "name": "type",
        "type": "select",
        "system": false,
        "required": true,
        "presentable": false,
        "unique": false,
        "options": {
          "maxSelect": 1,
          "values": ["general", "announcements", "events", "newsletter", "urgent", "social"]
        }
      },
      {
        "id": "mlist_status_field",
        "name": "status",
        "type": "select",
        "system": false,
        "required": true,
        "presentable": false,
        "unique": false,
        "options": {
          "maxSelect": 1,
          "values": ["active", "inactive", "archived"]
        }
      },
      {
        "id": "mlist_auto_subscribe_new_members_field",
        "name": "auto_subscribe_new_members",
        "type": "bool",
        "system": false,
        "required": false,
        "presentable": false,
        "unique": false,
        "options": {}
      },
      {
        "id": "mlist_moderator_email_field",
        "name": "moderator_email",
        "type": "email",
        "system": false,
        "required": false,
        "presentable": false,
        "unique": false,
        "options": {
          "exceptDomains": null,
          "onlyDomains": null
        }
      }
    ],
    "indexes": [
      "CREATE INDEX `idx_mailing_lists_association` ON `mailing_lists` (`association`)",
      "CREATE INDEX `idx_mailing_lists_status` ON `mailing_lists` (`status`)",
      "CREATE INDEX `idx_mailing_lists_type` ON `mailing_lists` (`type`)"
    ],
    "listRule": "@request.auth.id != \"\" && (@request.auth.role = \"super_admin\" || @request.auth.association = association)",
    "viewRule": "@request.auth.id != \"\" && (@request.auth.role = \"super_admin\" || @request.auth.association = association)",
    "createRule": "@request.auth.id != \"\" && (@request.auth.role = \"super_admin\" || (@request.auth.association = association && @request.auth.role = \"admin\"))",
    "updateRule": "@request.auth.id != \"\" && (@request.auth.role = \"super_admin\" || (@request.auth.association = association && @request.auth.role = \"admin\"))",
    "deleteRule": "@request.auth.role = \"super_admin\" || (@request.auth.association = association && @request.auth.role = \"admin\")",
    "options": {}
  },
  {
    "id": "member_list_subscriptions",
    "name": "member_list_subscriptions",
    "type": "base",
    "system": false,
    "schema": [
      {
        "id": "msub_member_field",
        "name": "member",
        "type": "relation",
        "system": false,
        "required": true,
        "presentable": false,
        "unique": false,
        "options": {
          "collectionId": "association_members",
          "cascadeDelete": true,
          "minSelect": null,
          "maxSelect": 1,
          "displayFields": ["name", "email"]
        }
      },
      {
        "id": "msub_mailing_list_field",
        "name": "mailing_list",
        "type": "relation",
        "system": false,
        "required": true,
        "presentable": false,
        "unique": false,
        "options": {
          "collectionId": "member_mailing_lists",
          "cascadeDelete": true,
          "minSelect": null,
          "maxSelect": 1,
          "displayFields": ["name"]
        }
      },
      {
        "id": "msub_status_field",
        "name": "status",
        "type": "select",
        "system": false,
        "required": true,
        "presentable": false,
        "unique": false,
        "options": {
          "maxSelect": 1,
          "values": ["subscribed", "unsubscribed", "pending"]
        }
      },
      {
        "id": "msub_subscribed_date_field",
        "name": "subscribed_date",
        "type": "date",
        "system": false,
        "required": false,
        "presentable": false,
        "unique": false,
        "options": {
          "min": "",
          "max": ""
        }
      },
      {
        "id": "msub_unsubscribed_date_field",
        "name": "unsubscribed_date",
        "type": "date",
        "system": false,
        "required": false,
        "presentable": false,
        "unique": false,
        "options": {
          "min": "",
          "max": ""
        }
      },
      {
        "id": "msub_preferences_field",
        "name": "preferences",
        "type": "json",
        "system": false,
        "required": false,
        "presentable": false,
        "unique": false,
        "options": {
          "maxSize": 2000000
        }
      }
    ],
    "indexes": [
      "CREATE UNIQUE INDEX `idx_unique_member_list` ON `mailing_list_subscriptions` (`member`, `mailing_list`)",
      "CREATE INDEX `idx_subscriptions_member` ON `mailing_list_subscriptions` (`member`)",
      "CREATE INDEX `idx_subscriptions_mailing_list` ON `mailing_list_subscriptions` (`mailing_list`)",
      "CREATE INDEX `idx_subscriptions_status` ON `mailing_list_subscriptions` (`status`)"
    ],
    "listRule": "@request.auth.id != \"\" && (@request.auth.role = \"super_admin\" || member.user = @request.auth.id || (@request.auth.role = \"admin\" && member.association = @request.auth.association))",
    "viewRule": "@request.auth.id != \"\" && (@request.auth.role = \"super_admin\" || member.user = @request.auth.id || (@request.auth.role = \"admin\" && member.association = @request.auth.association))",
    "createRule": "@request.auth.id != \"\" && (@request.auth.role = \"super_admin\" || member.user = @request.auth.id || (@request.auth.role = \"admin\" && member.association = @request.auth.association))",
    "updateRule": "@request.auth.id != \"\" && (@request.auth.role = \"super_admin\" || member.user = @request.auth.id || (@request.auth.role = \"admin\" && member.association = @request.auth.association))",
    "deleteRule": "@request.auth.role = \"super_admin\" || member.user = @request.auth.id || (@request.auth.role = \"admin\" && member.association = @request.auth.association)",
    "options": {}
  }
]