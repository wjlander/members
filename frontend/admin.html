<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Member Management System</title>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        [x-cloak] { display: none !important; }
    </style>
</head>
<body class="bg-red-50">
    <div class="min-h-screen flex items-center justify-center">
        <div class="max-w-md w-full space-y-8">
            <div class="text-center">
                <i class="fas fa-shield-alt text-6xl text-red-600 mb-4"></i>
                <h2 class="text-3xl font-bold text-red-900">Admin Panel</h2>
                <p class="mt-2 text-sm text-red-700">Member Management System Administration</p>
            </div>
            <div class="bg-white p-8 rounded-lg shadow-md border-2 border-red-200">
                <h3 class="text-lg font-medium mb-4 text-red-800">Administrator Access</h3>
                <div class="space-y-4">
                    <div class="bg-red-100 p-4 rounded-lg">
                        <h4 class="font-semibold text-red-800 mb-2">
                            <i class="fas fa-check-circle mr-2"></i>
                            Admin Domain Active
                        </h4>
                        <p class="text-sm text-red-700">
                            You are accessing the admin interface at <strong>p.ringing.org.uk</strong>
                        </p>
                    </div>
                    
                    <div class="space-y-2">
                        <div class="flex items-center text-green-600">
                            <i class="fas fa-check-circle mr-2"></i>
                            <span class="text-sm">Admin Interface: Active</span>
                        </div>
                        <div class="flex items-center text-green-600">
                            <i class="fas fa-check-circle mr-2"></i>
                            <span class="text-sm">Database: Connected</span>
                        </div>
                        <div class="flex items-center text-green-600">
                            <i class="fas fa-check-circle mr-2"></i>
                            <span class="text-sm">Authentication: Ready</span>
                        </div>
                    </div>
                    
                    <div class="mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
                        <h4 class="font-semibold text-yellow-800 mb-2">
                            <i class="fas fa-info-circle mr-2"></i>
                            Setup Required
                        </h4>
                        <p class="text-sm text-yellow-700 mb-3">
                            Complete the initial setup to access full admin features:
                        </p>
                        <ol class="text-sm text-yellow-700 space-y-1">
                            <li>1. Create your first admin user</li>
                            <li>2. Configure association settings</li>
                            <li>3. Set up email integration</li>
                            <li>4. Import member data (if applicable)</li>
                        </ol>
                    </div>
                    
                    <div class="mt-6">
                        <button onclick="accessAdminPanel()" class="w-full bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 transition-colors">
                            <i class="fas fa-sign-in-alt mr-2"></i>
                            Access Admin Panel
                        </button>
                    </div>
                </div>
                
                <div class="mt-6 pt-4 border-t border-gray-200">
                    <p class="text-xs text-gray-500 text-center">
                        Admin interface for Member Management System<br>
                        <a href="https://member.ringing.org.uk" class="text-red-600 hover:text-red-800">
                            ‚Üê Back to Member Portal
                        </a>
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        function accessAdminPanel() {
            // Check if we're on the admin domain
            const currentHost = window.location.host;
            
            if (currentHost.includes('p.ringing.org.uk')) {
                // We're on the admin domain, redirect to the main member interface with admin access
                window.location.href = 'https://member.ringing.org.uk/admin';
            } else {
                // Fallback - try to access admin interface on current domain
                window.location.href = '/admin';
            }
        }
        
        // Auto-detect system status
        document.addEventListener('DOMContentLoaded', function() {
            // Test if the backend is responding
            fetch('/health')
                .then(response => response.json())
                .then(data => {
                    console.log('System health:', data);
                    // Update status indicators if needed
                })
                .catch(error => {
                    console.log('Backend not responding via /health, trying /api/health');
                    return fetch('/api/health');
                })
                .then(response => response ? response.json() : null)
                .then(data => {
                    if (data) {
                        console.log('API health:', data);
                    }
                })
                .catch(error => {
                    console.warn('Health check failed:', error);
                });
        });
    </script>
</body>
</html>
